<!DOCTYPE html>
<html>
<head>
<title>Admin Login</title>
<link rel="stylesheet" href="style.css">
</head>
<body>


<div class="container">
<h2>ğŸ” Admin Login</h2>


<input id="username" placeholder="Username" />
<input id="password" type="password" placeholder="Password" />
<button onclick="login()">Login</button>


<p id="msg"></p>


<table id="table" style="display:none">
<thead>
<tr>
<th>Course</th>
<th>ID</th>
<th>Name</th>
<th>Session</th>
<th>Time</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>


<script>
function login() {
fetch('http://localhost:3000/admin/login', {
method: 'POST',
headers: { 'Content-Type': 'application/json' },
body: JSON.stringify({
username: document.getElementById('username').value,
password: document.getElementById('password').value
})
})
.then(res => {
if (!res.ok) throw Error();
return res.json();
})
.then(() => loadAttendance())
.catch(() => document.getElementById('msg').innerText = 'Invalid login');
}


function loadAttendance() {
document.getElementById('msg').innerText = 'Login successful';


fetch('http://localhost:3000/admin/attendance')
.then(res => res.json())
.then(data => {
document.getElementById('table').style.display = 'table';
const body = document.querySelector('tbody');
body.innerHTML = '';


data.forEach(r => {
body.innerHTML += `<tr>
<td>${r.course}</td>
<td>${r.id}</td>
<td>${r.name}</td>
<td>${r.session}</td>
<td>${r.time}</td>
</tr>`;
});
});
}
</script>
</body>
</html>
